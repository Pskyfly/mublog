<!doctype html>
<html>

<head>
	<meta charset='UTF-8'>
	<meta name='viewport' content='width=device-width initial-scale=1'>

	<link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext'
		rel='stylesheet' type='text/css' />
	<link rel="stylesheet" href="layui/css/layui.css" id="layUI">
	<link rel="stylesheet" href="/css/typora.css" id="Typora">
	<script src="layui/layui.js"></script>
	<title>第五周学习报告</title>
</head>

<body>
	<!--导航条-->
	<div class="margin-left:20px">
		<ul class="layui-nav" lay-filter="">
		  <li class="layui-nav-item"><a style="font-size: large;font-style: italic;">Pskyfly's Blog<a></li>
		  <li class="layui-nav-item layui-col-md-offset8"><a href="/homepage">首页</a></li>
		  <li class="layui-nav-item"><a href="/problems">刷题记录</a></li>
		  <li class="layui-nav-item">
			<a href="javascript:;">学习笔记</a>
			<dl class="layui-nav-child">
			  <!-- 二级菜单 -->
			  <dd><a href="/linux">Linux基础</a></dd>
			  <dd><a href="/layui">LayUI框架</a></dd>
			  <dd><a href="/acm">ACM-ICPC训练</a></dd>
			</dl>
		  </li>
		</ul>
	  </div>
	  <!--导航条-->
	<div class='typora-export-content'>
		<div id='write' class=''>
			<h1 id='第五周学习报告------李天航'><span>第五周学习报告——李天航</span></h1>
			<h2 id='线段树和树状数组'><span>线段树和树状数组</span></h2>
			<h3 id='线段树'><span>线段树</span></h3>
			<p><span>线段树的代码量很大，常数也很大，但是它的使用会比树状数组更加灵活（也更加难），下面放上线段树的模板。线段树n个节点最多会有4n-1（1+2+4+……+2^(logn+1)+2*n）个树结点，所以在开内存空间时，需要开4倍的空间。而遍历的时候也大概需要4logn个结点，而树状数组只有一个logn，所以线段树的常数比较大，</span>
			</p>
			<pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="c++"
				style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c++"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.2px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//求区间最大数</span></span></pre>
		</div>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;algorithm&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;iostream&gt;</span></span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">using</span> <span class="cm-keyword">namespace</span> <span class="cm-def">std</span>;</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-variable-3">int</span> <span class="cm-variable">N</span> <span class="cm-operator">=</span> <span class="cm-number">2e5</span> <span class="cm-operator">+</span> <span class="cm-number">10</span>;</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">struct</span> <span class="cm-def">Node</span> {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">l</span>, <span class="cm-variable">r</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">data</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">} <span class="cm-variable">tr</span>[<span class="cm-variable">N</span> <span class="cm-operator">*</span> <span class="cm-number">4</span>];<span class="cm-comment">//开四倍的空间，将区间视为结点</span></span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">pushup</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">u</span>) {<span class="cm-comment">//用子节点更新父节点</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">max</span>(<span class="cm-variable">tr</span>[<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>].<span class="cm-variable">data</span>, <span class="cm-variable">tr</span>[<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span> <span class="cm-operator">|</span> <span class="cm-number">1</span>].<span class="cm-variable">data</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">build</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">u</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">l</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">r</span>) {<span class="cm-comment">//初始化，建树</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">l</span> <span class="cm-operator">=</span> <span class="cm-variable">l</span>, <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">r</span> <span class="cm-operator">=</span> <span class="cm-variable">r</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">l</span> <span class="cm-operator">==</span> <span class="cm-variable">r</span>) {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">mid</span> <span class="cm-operator">=</span> (<span class="cm-variable">l</span> <span class="cm-operator">+</span> <span class="cm-variable">r</span>) <span class="cm-operator">&gt;&gt;</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">build</span>(<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>, <span class="cm-variable">l</span>, <span class="cm-variable">mid</span>), <span class="cm-variable">build</span>(<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span> <span class="cm-operator">|</span> <span class="cm-number">1</span>, <span class="cm-variable">mid</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>, <span class="cm-variable">r</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">pushup</span>(<span class="cm-variable">u</span>); &nbsp;<span class="cm-comment">//这里也可以不用, 因为相当于初始化了一个全为0的线段树</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">change</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">u</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">x</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">v</span>) {<span class="cm-comment">//单点修改，u为当前区间的编号</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">l</span> <span class="cm-operator">==</span> <span class="cm-variable">x</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">r</span> <span class="cm-operator">==</span> <span class="cm-variable">x</span>) {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">data</span> <span class="cm-operator">=</span> <span class="cm-variable">v</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } <span class="cm-keyword">else</span> {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">mid</span> <span class="cm-operator">=</span> (<span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">l</span> <span class="cm-operator">+</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">r</span>) <span class="cm-operator">&gt;&gt;</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">x</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">mid</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">change</span>(<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>, <span class="cm-variable">x</span>, <span class="cm-variable">v</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">else</span> </span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">change</span>(<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span> <span class="cm-operator">|</span> <span class="cm-number">1</span>, <span class="cm-variable">x</span>, <span class="cm-variable">v</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">pushup</span>(<span class="cm-variable">u</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-def">query</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">u</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">l</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">r</span>) {<span class="cm-comment">//查询</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">l</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">l</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">r</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">r</span>) {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">data</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">mid</span> <span class="cm-operator">=</span> (<span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">l</span> <span class="cm-operator">+</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">r</span>) <span class="cm-operator">&gt;&gt;</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">v</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">l</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">mid</span>) {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">v</span> <span class="cm-operator">=</span> <span class="cm-variable">query</span>(<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>, <span class="cm-variable">l</span>, <span class="cm-variable">r</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">r</span> <span class="cm-operator">&gt;</span> <span class="cm-variable">mid</span>) {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">v</span> <span class="cm-operator">=</span> <span class="cm-variable">max</span>(<span class="cm-variable">v</span>, <span class="cm-variable">query</span>(<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span> <span class="cm-operator">|</span> <span class="cm-number">1</span>, <span class="cm-variable">l</span>, <span class="cm-variable">r</span>));</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">v</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-variable">m</span>, <span class="cm-variable">p</span>;</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-def">main</span>() {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">cin</span> <span class="cm-operator">&gt;&gt;</span> <span class="cm-variable">m</span> <span class="cm-operator">&gt;&gt;</span> <span class="cm-variable">p</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">n</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>, <span class="cm-variable">last</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">build</span>(<span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-variable">m</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">x</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">char</span> <span class="cm-variable">op</span>[<span class="cm-number">2</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">while</span> (<span class="cm-variable">m</span><span class="cm-operator">--</span>) {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">scanf</span>(<span class="cm-string">"%s%d"</span>, <span class="cm-variable">op</span>, <span class="cm-operator">&amp;</span><span class="cm-variable">x</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-operator">*</span><span class="cm-variable">op</span> <span class="cm-operator">==</span> <span class="cm-string">'Q'</span>) {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">last</span> <span class="cm-operator">=</span> <span class="cm-variable">query</span>(<span class="cm-number">1</span>, <span class="cm-variable">n</span> <span class="cm-operator">-</span> <span class="cm-variable">x</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>, <span class="cm-variable">n</span>);<span class="cm-comment">//强制在线</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">printf</span>(<span class="cm-string">"%d\n"</span>, <span class="cm-variable">last</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  } <span class="cm-keyword">else</span> {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">change</span>(<span class="cm-number">1</span>, <span class="cm-variable">n</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>, (<span class="cm-variable">last</span> <span class="cm-operator">+</span> <span class="cm-variable">x</span>) <span class="cm-operator">%</span> <span class="cm-variable">p</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">n</span><span class="cm-operator">++</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-number">0</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//区间修改</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;iostream&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;cstdio&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;cstring&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;algorithm&gt;</span></span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">typedef</span> <span class="cm-variable-3">long</span> <span class="cm-variable-3">long</span> <span class="cm-variable">LL</span>;</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-variable-3">int</span> <span class="cm-variable">N</span> <span class="cm-operator">=</span> <span class="cm-number">1e5</span> <span class="cm-operator">+</span> <span class="cm-number">10</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-variable">n</span>, <span class="cm-variable">m</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-variable">w</span>[<span class="cm-variable">N</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">struct</span> <span class="cm-def">Node</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">l</span>, <span class="cm-variable">r</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">LL</span> <span class="cm-variable">sum</span>, <span class="cm-variable">add</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}<span class="cm-variable">tr</span>[<span class="cm-variable">N</span> <span class="cm-operator">*</span> <span class="cm-number">4</span>];</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">pushup</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">u</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">sum</span> <span class="cm-operator">=</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>].<span class="cm-variable">sum</span> <span class="cm-operator">+</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span> <span class="cm-operator">|</span> <span class="cm-number">1</span>].<span class="cm-variable">sum</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">pushdown</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">u</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">auto</span> <span class="cm-operator">&amp;</span><span class="cm-variable">root</span> <span class="cm-operator">=</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>], <span class="cm-operator">&amp;</span><span class="cm-variable">left</span> <span class="cm-operator">=</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>], <span class="cm-operator">&amp;</span><span class="cm-variable">right</span> <span class="cm-operator">=</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span> <span class="cm-operator">|</span> <span class="cm-number">1</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">root</span>.<span class="cm-variable">add</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//传递懒标记，更新子树</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">left</span>.<span class="cm-variable">add</span> <span class="cm-operator">+=</span> <span class="cm-variable">root</span>.<span class="cm-variable">add</span>, <span class="cm-variable">left</span>.<span class="cm-variable">sum</span> <span class="cm-operator">+=</span> (<span class="cm-variable">LL</span>) (<span class="cm-variable">left</span>.<span class="cm-variable">r</span> <span class="cm-operator">-</span> <span class="cm-variable">left</span>.<span class="cm-variable">l</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>) <span class="cm-operator">*</span> <span class="cm-variable">root</span>.<span class="cm-variable">add</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">right</span>.<span class="cm-variable">add</span> <span class="cm-operator">+=</span> <span class="cm-variable">root</span>.<span class="cm-variable">add</span>, <span class="cm-variable">right</span>.<span class="cm-variable">sum</span> <span class="cm-operator">+=</span> (<span class="cm-variable">LL</span>) (<span class="cm-variable">right</span>.<span class="cm-variable">r</span> <span class="cm-operator">-</span> <span class="cm-variable">right</span>.<span class="cm-variable">l</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>) <span class="cm-operator">*</span> <span class="cm-variable">root</span>.<span class="cm-variable">add</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//删除父结点懒标记</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">root</span>.<span class="cm-variable">add</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">build</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">u</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">l</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">r</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">l</span> <span class="cm-operator">==</span> <span class="cm-variable">r</span>) <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>] <span class="cm-operator">=</span> {<span class="cm-variable">l</span>, <span class="cm-variable">r</span>, <span class="cm-variable">w</span>[<span class="cm-variable">l</span>], <span class="cm-number">0</span>};</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">else</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">tr</span>[<span class="cm-variable">u</span>] <span class="cm-operator">=</span> {<span class="cm-variable">l</span>, <span class="cm-variable">r</span>};</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">mid</span> <span class="cm-operator">=</span> <span class="cm-variable">l</span> <span class="cm-operator">+</span> <span class="cm-variable">r</span> <span class="cm-operator">&gt;&gt;</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">build</span>(<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>, <span class="cm-variable">l</span>, <span class="cm-variable">mid</span>), <span class="cm-variable">build</span>(<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span> <span class="cm-operator">|</span> <span class="cm-number">1</span>, <span class="cm-variable">mid</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>, <span class="cm-variable">r</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">pushup</span>(<span class="cm-variable">u</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">modify</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">u</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">l</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">r</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">v</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">l</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">l</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">r</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">r</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">sum</span> <span class="cm-operator">+=</span> (<span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">r</span> <span class="cm-operator">-</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">l</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>) <span class="cm-operator">*</span> <span class="cm-variable">v</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">add</span> <span class="cm-operator">+=</span> <span class="cm-variable">v</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">else</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">pushdown</span>(<span class="cm-variable">u</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">mid</span> <span class="cm-operator">=</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">l</span> <span class="cm-operator">+</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">r</span> <span class="cm-operator">&gt;&gt;</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">l</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">mid</span>) <span class="cm-variable">modify</span>(<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>, <span class="cm-variable">l</span>, <span class="cm-variable">r</span>, <span class="cm-variable">v</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">r</span> <span class="cm-operator">&gt;</span> <span class="cm-variable">mid</span>) <span class="cm-variable">modify</span>(<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span> <span class="cm-operator">|</span> <span class="cm-number">1</span>, <span class="cm-variable">l</span>, <span class="cm-variable">r</span>, <span class="cm-variable">v</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">pushup</span>(<span class="cm-variable">u</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">LL</span> <span class="cm-def">query</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">u</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">l</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">r</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">l</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">l</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">r</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">r</span>) <span class="cm-keyword">return</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">sum</span>;</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">pushdown</span>(<span class="cm-variable">u</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">mid</span> <span class="cm-operator">=</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">l</span> <span class="cm-operator">+</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">r</span> <span class="cm-operator">&gt;&gt;</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">LL</span> <span class="cm-variable">v</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">l</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">mid</span>) <span class="cm-variable">v</span> <span class="cm-operator">=</span> <span class="cm-variable">query</span>(<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>, <span class="cm-variable">l</span>, <span class="cm-variable">r</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">r</span> <span class="cm-operator">&gt;</span> <span class="cm-variable">mid</span>) <span class="cm-variable">v</span> <span class="cm-operator">+=</span> <span class="cm-variable">query</span>(<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span> <span class="cm-operator">|</span> <span class="cm-number">1</span>, <span class="cm-variable">l</span>, <span class="cm-variable">r</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">v</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-def">main</span>()</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">scanf</span>(<span class="cm-string">"%d%d"</span>, <span class="cm-operator">&amp;</span><span class="cm-variable">n</span>, <span class="cm-operator">&amp;</span><span class="cm-variable">m</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable-3">int</span> <span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>; <span class="cm-variable">i</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">n</span>; <span class="cm-operator">++</span><span class="cm-variable">i</span>) <span class="cm-variable">scanf</span>(<span class="cm-string">"%d"</span>, <span class="cm-operator">&amp;</span><span class="cm-variable">w</span>[<span class="cm-variable">i</span>]);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">build</span>(<span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-variable">n</span>);</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">char</span> <span class="cm-variable">op</span>[<span class="cm-number">2</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">l</span>, <span class="cm-variable">r</span>, <span class="cm-variable">t</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">while</span> (<span class="cm-variable">m</span> <span class="cm-operator">--</span> )</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">scanf</span>(<span class="cm-string">"%s%d%d"</span>, <span class="cm-variable">op</span>, <span class="cm-operator">&amp;</span><span class="cm-variable">l</span>, <span class="cm-operator">&amp;</span><span class="cm-variable">r</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-operator">*</span><span class="cm-variable">op</span> <span class="cm-operator">==</span> <span class="cm-string">'Q'</span>) <span class="cm-variable">printf</span>(<span class="cm-string">"%lld\n"</span>, <span class="cm-variable">query</span>(<span class="cm-number">1</span>, <span class="cm-variable">l</span>, <span class="cm-variable">r</span>));</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">else</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">scanf</span>(<span class="cm-string">"%d"</span>, <span class="cm-operator">&amp;</span><span class="cm-variable">t</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">modify</span>(<span class="cm-number">1</span>, <span class="cm-variable">l</span>, <span class="cm-variable">r</span>, <span class="cm-variable">t</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-number">0</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//有乘法和取模</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include&lt;cstdio&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include&lt;iostream&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include&lt;math.h&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include&lt;algorithm&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include&lt;cstring&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include&lt;unordered_map&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include&lt;string&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include&lt;queue&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include&lt;map&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include&lt;ctime&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include&lt;limits.h&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;stack&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include&lt;set&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include&lt;iomanip&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define ll long long</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define um unordered_map</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#pragma warning(disable : 4996)</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">using</span> <span class="cm-keyword">namespace</span> <span class="cm-def">std</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define rep(l,a,b) for(ll l=a;l&lt;=b;l++)</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define repp(l,a,b) for(ll l=a;l&gt;=b;l--)</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define mem(x) memset(x,0,sizeof(x))</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define fr fast_IO::read()</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define INF 0x3f3f3f3f</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">namespace</span> <span class="cm-def">fast_IO</span> {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ll</span> <span class="cm-def">read</span>() {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ll</span> <span class="cm-variable">num</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">char</span> <span class="cm-variable">c</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">bool</span> <span class="cm-variable">tag</span> <span class="cm-operator">=</span> <span class="cm-atom">false</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">while</span> ((<span class="cm-variable">c</span> <span class="cm-operator">=</span> <span class="cm-variable">getchar</span>()) <span class="cm-operator">!=</span> <span class="cm-string">'-'</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">c</span> <span class="cm-operator">!=</span> <span class="cm-string">'+'</span> <span class="cm-operator">&amp;&amp;</span> (<span class="cm-variable">c</span> <span class="cm-operator">&lt;</span> <span class="cm-string">'0'</span> <span class="cm-operator">||</span> <span class="cm-variable">c</span> <span class="cm-operator">&gt;</span> <span class="cm-string">'9'</span>) <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">~c</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-operator">!</span><span class="cm-variable">~c</span>)<span class="cm-keyword">return</span> <span class="cm-variable">EOF</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">c</span> <span class="cm-operator">==</span> <span class="cm-string">'-'</span>)<span class="cm-variable">tag</span> <span class="cm-operator">=</span> <span class="cm-atom">true</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable">c</span> <span class="cm-operator">==</span> <span class="cm-string">'+'</span>)<span class="cm-variable">tag</span> <span class="cm-operator">=</span> <span class="cm-atom">false</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span> <span class="cm-variable">num</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span> <span class="cm-variable">^</span> <span class="cm-number">48</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">while</span> ((<span class="cm-variable">c</span> <span class="cm-operator">=</span> <span class="cm-variable">getchar</span>()) <span class="cm-operator">&gt;=</span> <span class="cm-string">'0'</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">c</span> <span class="cm-operator">&lt;=</span> <span class="cm-string">'9'</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">num</span> <span class="cm-operator">=</span> (<span class="cm-variable">num</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>) <span class="cm-operator">+</span> (<span class="cm-variable">num</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">3</span>) <span class="cm-operator">+</span> (<span class="cm-variable">c</span> <span class="cm-variable">^</span> <span class="cm-number">48</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">tag</span>)<span class="cm-keyword">return</span> <span class="cm-operator">-</span><span class="cm-variable">num</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-variable">num</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-variable">ll</span> <span class="cm-variable">mod</span> <span class="cm-operator">=</span> <span class="cm-number">50001</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define N 1000000</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-variable">ll</span> <span class="cm-variable">n</span>, <span class="cm-variable">m</span>, <span class="cm-variable">p</span>, <span class="cm-variable">a</span>[<span class="cm-variable">N</span>], <span class="cm-variable">ans</span>[<span class="cm-variable">N</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">2</span>], <span class="cm-variable">tag</span>[<span class="cm-variable">N</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">2</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">struct</span> <span class="cm-def">node</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ll</span> <span class="cm-variable">v</span>, <span class="cm-variable">mul</span>, <span class="cm-variable">add</span>;<span class="cm-comment">//线段树结构体，v表示此时的答案，mul表示乘法意义上的lazytag，add是加法意义上的</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}<span class="cm-variable">st</span>[<span class="cm-number">400007</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">bt</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">root</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">l</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">r</span>)<span class="cm-comment">//初始化</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">mul</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">add</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">l</span> <span class="cm-operator">==</span> <span class="cm-variable">r</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">v</span> <span class="cm-operator">=</span> <span class="cm-variable">a</span>[<span class="cm-variable">l</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">int</span> <span class="cm-variable">m</span> <span class="cm-operator">=</span> <span class="cm-variable">l</span> <span class="cm-operator">+</span> <span class="cm-variable">r</span> <span class="cm-operator">&gt;&gt;</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">bt</span>(<span class="cm-variable">root</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>, <span class="cm-variable">l</span>, <span class="cm-variable">m</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">bt</span>(<span class="cm-variable">root</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span> <span class="cm-operator">|</span> <span class="cm-number">1</span>, <span class="cm-variable">m</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>, <span class="cm-variable">r</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">v</span> <span class="cm-operator">=</span> <span class="cm-variable">st</span>[<span class="cm-variable">root</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>].<span class="cm-variable">v</span> <span class="cm-operator">+</span> <span class="cm-variable">st</span>[<span class="cm-variable">root</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span> <span class="cm-operator">|</span> <span class="cm-number">1</span>].<span class="cm-variable">v</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">v</span> <span class="cm-operator">%=</span> <span class="cm-variable">p</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">pushdown</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">root</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">l</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">r</span>)<span class="cm-comment">//维护lazytag</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">int</span> <span class="cm-variable">m</span> <span class="cm-operator">=</span> <span class="cm-variable">l</span> <span class="cm-operator">+</span> <span class="cm-variable">r</span> <span class="cm-operator">&gt;&gt;</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">int</span> <span class="cm-variable">ls</span> <span class="cm-operator">=</span> <span class="cm-variable">root</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>; <span class="cm-variable-3">int</span> <span class="cm-variable">rs</span> <span class="cm-operator">=</span> <span class="cm-variable">root</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span> <span class="cm-operator">|</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">st</span>[<span class="cm-variable">ls</span>].<span class="cm-variable">v</span> <span class="cm-operator">=</span> (<span class="cm-variable">st</span>[<span class="cm-variable">ls</span>].<span class="cm-variable">v</span> <span class="cm-operator">*</span> <span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">mul</span> <span class="cm-operator">+</span> <span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">add</span> <span class="cm-operator">*</span> (<span class="cm-variable">m</span> <span class="cm-operator">-</span> <span class="cm-variable">l</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>)) <span class="cm-operator">%</span> <span class="cm-variable">p</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">st</span>[<span class="cm-variable">rs</span>].<span class="cm-variable">v</span> <span class="cm-operator">=</span> (<span class="cm-variable">st</span>[<span class="cm-variable">rs</span>].<span class="cm-variable">v</span> <span class="cm-operator">*</span> <span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">mul</span> <span class="cm-operator">+</span> <span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">add</span> <span class="cm-operator">*</span> (<span class="cm-variable">r</span> <span class="cm-operator">-</span> <span class="cm-variable">m</span>)) <span class="cm-operator">%</span> <span class="cm-variable">p</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">st</span>[<span class="cm-variable">ls</span>].<span class="cm-variable">mul</span> <span class="cm-operator">=</span> (<span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">mul</span> <span class="cm-operator">*</span> <span class="cm-variable">st</span>[<span class="cm-variable">ls</span>].<span class="cm-variable">mul</span>) <span class="cm-operator">%</span> <span class="cm-variable">p</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">st</span>[<span class="cm-variable">rs</span>].<span class="cm-variable">mul</span> <span class="cm-operator">=</span> (<span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">mul</span> <span class="cm-operator">*</span> <span class="cm-variable">st</span>[<span class="cm-variable">rs</span>].<span class="cm-variable">mul</span>) <span class="cm-operator">%</span> <span class="cm-variable">p</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">st</span>[<span class="cm-variable">ls</span>].<span class="cm-variable">add</span> <span class="cm-operator">=</span> (<span class="cm-variable">st</span>[<span class="cm-variable">ls</span>].<span class="cm-variable">add</span> <span class="cm-operator">*</span> <span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">mul</span> <span class="cm-operator">+</span> <span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">add</span>) <span class="cm-operator">%</span> <span class="cm-variable">p</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">st</span>[<span class="cm-variable">rs</span>].<span class="cm-variable">add</span> <span class="cm-operator">=</span> (<span class="cm-variable">st</span>[<span class="cm-variable">rs</span>].<span class="cm-variable">add</span> <span class="cm-operator">*</span> <span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">mul</span> <span class="cm-operator">+</span> <span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">add</span>) <span class="cm-operator">%</span> <span class="cm-variable">p</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">mul</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">add</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">ud1</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">root</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">stdl</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">stdr</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">l</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">r</span>, <span class="cm-variable">ll</span> <span class="cm-variable">k</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">r</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">stdl</span> <span class="cm-operator">||</span> <span class="cm-variable">stdr</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">l</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">l</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">stdl</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">stdr</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">r</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">v</span> <span class="cm-operator">=</span> (<span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">v</span> <span class="cm-operator">*</span> <span class="cm-variable">k</span>) <span class="cm-operator">%</span> <span class="cm-variable">p</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">mul</span> <span class="cm-operator">=</span> (<span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">mul</span> <span class="cm-operator">*</span> <span class="cm-variable">k</span>) <span class="cm-operator">%</span> <span class="cm-variable">p</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">add</span> <span class="cm-operator">=</span> (<span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">add</span> <span class="cm-operator">*</span> <span class="cm-variable">k</span>) <span class="cm-operator">%</span> <span class="cm-variable">p</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pushdown</span>(<span class="cm-variable">root</span>, <span class="cm-variable">stdl</span>, <span class="cm-variable">stdr</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">int</span> <span class="cm-variable">m</span> <span class="cm-operator">=</span> (<span class="cm-variable">stdl</span> <span class="cm-operator">+</span> <span class="cm-variable">stdr</span>) <span class="cm-operator">&gt;&gt;</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ud1</span>(<span class="cm-variable">root</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>, <span class="cm-variable">stdl</span>, <span class="cm-variable">m</span>, <span class="cm-variable">l</span>, <span class="cm-variable">r</span>, <span class="cm-variable">k</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ud1</span>(<span class="cm-variable">root</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span> <span class="cm-operator">|</span> <span class="cm-number">1</span>, <span class="cm-variable">m</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>, <span class="cm-variable">stdr</span>, <span class="cm-variable">l</span>, <span class="cm-variable">r</span>, <span class="cm-variable">k</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">v</span> <span class="cm-operator">=</span> (<span class="cm-variable">st</span>[<span class="cm-variable">root</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>].<span class="cm-variable">v</span> <span class="cm-operator">+</span> <span class="cm-variable">st</span>[<span class="cm-variable">root</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span> <span class="cm-operator">|</span> <span class="cm-number">1</span>].<span class="cm-variable">v</span>) <span class="cm-operator">%</span> <span class="cm-variable">p</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">ud2</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">root</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">stdl</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">stdr</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">l</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">r</span>, <span class="cm-variable">ll</span> <span class="cm-variable">k</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">r</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">stdl</span> <span class="cm-operator">||</span> <span class="cm-variable">stdr</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">l</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">l</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">stdl</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">stdr</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">r</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">add</span> <span class="cm-operator">=</span> (<span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">add</span> <span class="cm-operator">+</span> <span class="cm-variable">k</span>) <span class="cm-operator">%</span> <span class="cm-variable">p</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">v</span> <span class="cm-operator">=</span> (<span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">v</span> <span class="cm-operator">+</span> <span class="cm-variable">k</span> <span class="cm-operator">*</span> (<span class="cm-variable">stdr</span> <span class="cm-operator">-</span> <span class="cm-variable">stdl</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>)) <span class="cm-operator">%</span> <span class="cm-variable">p</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pushdown</span>(<span class="cm-variable">root</span>, <span class="cm-variable">stdl</span>, <span class="cm-variable">stdr</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">int</span> <span class="cm-variable">m</span> <span class="cm-operator">=</span> <span class="cm-variable">stdl</span> <span class="cm-operator">+</span> <span class="cm-variable">stdr</span> <span class="cm-operator">&gt;&gt;</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ud2</span>(<span class="cm-variable">root</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>, <span class="cm-variable">stdl</span>, <span class="cm-variable">m</span>, <span class="cm-variable">l</span>, <span class="cm-variable">r</span>, <span class="cm-variable">k</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ud2</span>(<span class="cm-variable">root</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span> <span class="cm-operator">|</span> <span class="cm-number">1</span>, <span class="cm-variable">m</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>, <span class="cm-variable">stdr</span>, <span class="cm-variable">l</span>, <span class="cm-variable">r</span>, <span class="cm-variable">k</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">v</span> <span class="cm-operator">=</span> (<span class="cm-variable">st</span>[<span class="cm-variable">root</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>].<span class="cm-variable">v</span> <span class="cm-operator">+</span> <span class="cm-variable">st</span>[<span class="cm-variable">root</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span> <span class="cm-operator">|</span> <span class="cm-number">1</span>].<span class="cm-variable">v</span>) <span class="cm-operator">%</span> <span class="cm-variable">p</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ll</span> <span class="cm-def">query</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">root</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">stdl</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">stdr</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">l</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">r</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">r</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">stdl</span> <span class="cm-operator">||</span> <span class="cm-variable">stdr</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">l</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-number">0</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">l</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">stdl</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">stdr</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">r</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-variable">st</span>[<span class="cm-variable">root</span>].<span class="cm-variable">v</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pushdown</span>(<span class="cm-variable">root</span>, <span class="cm-variable">stdl</span>, <span class="cm-variable">stdr</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">int</span> <span class="cm-variable">m</span> <span class="cm-operator">=</span> <span class="cm-variable">stdl</span> <span class="cm-operator">+</span> <span class="cm-variable">stdr</span> <span class="cm-operator">&gt;&gt;</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> (<span class="cm-variable">query</span>(<span class="cm-variable">root</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>, <span class="cm-variable">stdl</span>, <span class="cm-variable">m</span>, <span class="cm-variable">l</span>, <span class="cm-variable">r</span>) <span class="cm-operator">+</span> <span class="cm-variable">query</span>(<span class="cm-variable">root</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span> <span class="cm-operator">|</span> <span class="cm-number">1</span>, <span class="cm-variable">m</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>, <span class="cm-variable">stdr</span>, <span class="cm-variable">l</span>, <span class="cm-variable">r</span>)) <span class="cm-operator">%</span> <span class="cm-variable">p</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">signed</span> <span class="cm-def">main</span>()</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">//freopen("in.txt", "r", stdin);</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">cin</span> <span class="cm-operator">&gt;&gt;</span> <span class="cm-variable">n</span> <span class="cm-operator">&gt;&gt;</span> <span class="cm-variable">m</span><span class="cm-operator">&gt;&gt;</span><span class="cm-variable">p</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-number">1</span>, <span class="cm-variable">n</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">a</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-variable">fr</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">bt</span>(<span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-variable">n</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">while</span> (<span class="cm-variable">m</span><span class="cm-operator">--</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">int</span> <span class="cm-variable">chk</span> <span class="cm-operator">=</span> <span class="cm-variable">fr</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">int</span> <span class="cm-variable">x</span>, <span class="cm-variable">y</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ll</span> <span class="cm-variable">k</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">chk</span> <span class="cm-operator">==</span> <span class="cm-number">1</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">fr</span>, <span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">fr</span>, <span class="cm-variable">k</span> <span class="cm-operator">=</span> <span class="cm-variable">fr</span>, <span class="cm-variable">ud1</span>(<span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-variable">n</span>, <span class="cm-variable">x</span>, <span class="cm-variable">y</span>, <span class="cm-variable">k</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable">chk</span> <span class="cm-operator">==</span> <span class="cm-number">2</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">fr</span>, <span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">fr</span>, <span class="cm-variable">k</span> <span class="cm-operator">=</span> <span class="cm-variable">fr</span>, <span class="cm-variable">ud2</span>(<span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-variable">n</span>, <span class="cm-variable">x</span>, <span class="cm-variable">y</span>, <span class="cm-variable">k</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-variable">fr</span>, <span class="cm-variable">y</span> <span class="cm-operator">=</span> <span class="cm-variable">fr</span>, <span class="cm-variable">printf</span>(<span class="cm-string">"%lld\n"</span>, <span class="cm-variable">query</span>(<span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-variable">n</span>, <span class="cm-variable">x</span>, <span class="cm-variable">y</span>));</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//有平方和</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-variable">ll</span> <span class="cm-variable">mod</span> <span class="cm-operator">=</span> <span class="cm-number">50001</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define N 10000000</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-variable">n</span>, <span class="cm-variable">m</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">double</span> <span class="cm-variable">w</span>[<span class="cm-variable">N</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">struct</span> <span class="cm-def">Node</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">int</span> <span class="cm-variable">l</span>, <span class="cm-variable">r</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">double</span> <span class="cm-variable">sum</span>, <span class="cm-variable">sum2</span>, <span class="cm-variable">add</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}<span class="cm-variable">tr</span>[<span class="cm-variable">N</span> <span class="cm-operator">*</span> <span class="cm-number">4</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">pushup</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">u</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">sum</span> <span class="cm-operator">=</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>].<span class="cm-variable">sum</span> <span class="cm-operator">+</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span> <span class="cm-operator">|</span> <span class="cm-number">1</span>].<span class="cm-variable">sum</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">sum2</span> <span class="cm-operator">=</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>].<span class="cm-variable">sum2</span> <span class="cm-operator">+</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span> <span class="cm-operator">|</span> <span class="cm-number">1</span>].<span class="cm-variable">sum2</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">pushdown</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">u</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">auto</span><span class="cm-operator">&amp;</span> <span class="cm-variable">root</span> <span class="cm-operator">=</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>], <span class="cm-operator">&amp;</span> <span class="cm-variable">left</span> <span class="cm-operator">=</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>], <span class="cm-operator">&amp;</span> <span class="cm-variable">right</span> <span class="cm-operator">=</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span> <span class="cm-operator">|</span> <span class="cm-number">1</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">root</span>.<span class="cm-variable">add</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">double</span> <span class="cm-variable">k</span> <span class="cm-operator">=</span> <span class="cm-variable">root</span>.<span class="cm-variable">add</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">left</span>.<span class="cm-variable">add</span> <span class="cm-operator">+=</span> <span class="cm-variable">k</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">left</span>.<span class="cm-variable">sum2</span> <span class="cm-operator">+=</span> (<span class="cm-variable">left</span>.<span class="cm-variable">r</span> <span class="cm-operator">-</span> <span class="cm-variable">left</span>.<span class="cm-variable">l</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>) <span class="cm-operator">*</span> <span class="cm-variable">k</span> <span class="cm-operator">*</span> <span class="cm-variable">k</span> <span class="cm-operator">+</span> <span class="cm-number">2</span> <span class="cm-operator">*</span> <span class="cm-variable">k</span> <span class="cm-operator">*</span> <span class="cm-variable">left</span>.<span class="cm-variable">sum</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">left</span>.<span class="cm-variable">sum</span> <span class="cm-operator">+=</span> (<span class="cm-variable">left</span>.<span class="cm-variable">r</span> <span class="cm-operator">-</span> <span class="cm-variable">left</span>.<span class="cm-variable">l</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>) <span class="cm-operator">*</span> <span class="cm-variable">k</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">right</span>.<span class="cm-variable">add</span> <span class="cm-operator">+=</span> <span class="cm-variable">k</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">right</span>.<span class="cm-variable">sum2</span> <span class="cm-operator">+=</span> (<span class="cm-variable">right</span>.<span class="cm-variable">r</span> <span class="cm-operator">-</span> <span class="cm-variable">right</span>.<span class="cm-variable">l</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>) <span class="cm-operator">*</span> <span class="cm-variable">k</span> <span class="cm-operator">*</span> <span class="cm-variable">k</span> <span class="cm-operator">+</span> <span class="cm-number">2</span> <span class="cm-operator">*</span> <span class="cm-variable">k</span> <span class="cm-operator">*</span> <span class="cm-variable">right</span>.<span class="cm-variable">sum</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">right</span>.<span class="cm-variable">sum</span> <span class="cm-operator">+=</span> (<span class="cm-variable">right</span>.<span class="cm-variable">r</span> <span class="cm-operator">-</span> <span class="cm-variable">right</span>.<span class="cm-variable">l</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>) <span class="cm-operator">*</span> <span class="cm-variable">k</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">root</span>.<span class="cm-variable">add</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">build</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">u</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">l</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">r</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">l</span> <span class="cm-operator">==</span> <span class="cm-variable">r</span>) <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>] <span class="cm-operator">=</span> { <span class="cm-variable">l</span>, <span class="cm-variable">r</span>, <span class="cm-variable">w</span>[<span class="cm-variable">l</span>],<span class="cm-variable">w</span>[<span class="cm-variable">l</span>] <span class="cm-operator">*</span> <span class="cm-variable">w</span>[<span class="cm-variable">l</span>], <span class="cm-number">0</span> };</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">tr</span>[<span class="cm-variable">u</span>] <span class="cm-operator">=</span> { <span class="cm-variable">l</span>, <span class="cm-variable">r</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span> };</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">int</span> <span class="cm-variable">mid</span> <span class="cm-operator">=</span> <span class="cm-variable">l</span> <span class="cm-operator">+</span> <span class="cm-variable">r</span> <span class="cm-operator">&gt;&gt;</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">build</span>(<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>, <span class="cm-variable">l</span>, <span class="cm-variable">mid</span>), <span class="cm-variable">build</span>(<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span> <span class="cm-operator">|</span> <span class="cm-number">1</span>, <span class="cm-variable">mid</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>, <span class="cm-variable">r</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pushup</span>(<span class="cm-variable">u</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">modify</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">u</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">l</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">r</span>, <span class="cm-variable-3">double</span> <span class="cm-variable">v</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">l</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">l</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">r</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">r</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">sum2</span> <span class="cm-operator">+=</span> (<span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">r</span> <span class="cm-operator">-</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">l</span><span class="cm-operator">+</span><span class="cm-number">1</span>) <span class="cm-operator">*</span> <span class="cm-variable">v</span> <span class="cm-operator">*</span> <span class="cm-variable">v</span> <span class="cm-operator">+</span> <span class="cm-number">2</span> <span class="cm-operator">*</span> <span class="cm-variable">v</span> <span class="cm-operator">*</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">sum</span>;<span class="cm-comment">//误写成n</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">sum</span> <span class="cm-operator">+=</span> (<span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">r</span> <span class="cm-operator">-</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">l</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>) <span class="cm-operator">*</span> <span class="cm-variable">v</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">add</span> <span class="cm-operator">+=</span> <span class="cm-variable">v</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pushdown</span>(<span class="cm-variable">u</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">int</span> <span class="cm-variable">mid</span> <span class="cm-operator">=</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">l</span> <span class="cm-operator">+</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">r</span> <span class="cm-operator">&gt;&gt;</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">l</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">mid</span>) <span class="cm-variable">modify</span>(<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>, <span class="cm-variable">l</span>, <span class="cm-variable">r</span>, <span class="cm-variable">v</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">r</span> <span class="cm-operator">&gt;</span> <span class="cm-variable">mid</span>) <span class="cm-variable">modify</span>(<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span> <span class="cm-operator">|</span> <span class="cm-number">1</span>, <span class="cm-variable">l</span>, <span class="cm-variable">r</span>, <span class="cm-variable">v</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pushup</span>(<span class="cm-variable">u</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">double</span> <span class="cm-def">query</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">u</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">l</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">r</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">l</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">l</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">r</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">r</span>) <span class="cm-keyword">return</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">sum</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pushdown</span>(<span class="cm-variable">u</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">int</span> <span class="cm-variable">mid</span> <span class="cm-operator">=</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">l</span> <span class="cm-operator">+</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">r</span> <span class="cm-operator">&gt;&gt;</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">double</span> <span class="cm-variable">v</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;<span class="cm-comment">//写成ll……</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">l</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">mid</span>) <span class="cm-variable">v</span> <span class="cm-operator">=</span> <span class="cm-variable">query</span>(<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>, <span class="cm-variable">l</span>, <span class="cm-variable">r</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">r</span> <span class="cm-operator">&gt;</span> <span class="cm-variable">mid</span>) <span class="cm-variable">v</span> <span class="cm-operator">+=</span> <span class="cm-variable">query</span>(<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span> <span class="cm-operator">|</span> <span class="cm-number">1</span>, <span class="cm-variable">l</span>, <span class="cm-variable">r</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-variable">v</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">double</span> <span class="cm-def">query2</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">u</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">l</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">r</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">l</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">l</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">r</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">r</span>) <span class="cm-keyword">return</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">sum2</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">pushdown</span>(<span class="cm-variable">u</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">int</span> <span class="cm-variable">mid</span> <span class="cm-operator">=</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">l</span> <span class="cm-operator">+</span> <span class="cm-variable">tr</span>[<span class="cm-variable">u</span>].<span class="cm-variable">r</span> <span class="cm-operator">&gt;&gt;</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">double</span> <span class="cm-variable">v</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">l</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">mid</span>) <span class="cm-variable">v</span> <span class="cm-operator">=</span> <span class="cm-variable">query2</span>(<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>, <span class="cm-variable">l</span>, <span class="cm-variable">r</span>);<span class="cm-comment">//没加2</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">r</span> <span class="cm-operator">&gt;</span> <span class="cm-variable">mid</span>) <span class="cm-variable">v</span> <span class="cm-operator">+=</span> <span class="cm-variable">query2</span>(<span class="cm-variable">u</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span> <span class="cm-operator">|</span> <span class="cm-number">1</span>, <span class="cm-variable">l</span>, <span class="cm-variable">r</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-variable">v</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">signed</span> <span class="cm-def">main</span>()</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">freopen</span>(<span class="cm-string">"in.txt"</span>, <span class="cm-string">"r"</span>, <span class="cm-variable">stdin</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">scanf</span>(<span class="cm-string">"%lld%lld"</span>, <span class="cm-operator">&amp;</span><span class="cm-variable">n</span>, <span class="cm-operator">&amp;</span><span class="cm-variable">m</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-number">1</span>, <span class="cm-variable">n</span>) <span class="cm-variable">scanf</span>(<span class="cm-string">"%lf"</span>, <span class="cm-operator">&amp;</span><span class="cm-variable">w</span>[<span class="cm-variable">i</span>]);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">build</span>(<span class="cm-number">1</span>, <span class="cm-number">1</span>, <span class="cm-variable">n</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">int</span> <span class="cm-variable">op</span>, <span class="cm-variable">x</span>, <span class="cm-variable">y</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">double</span> <span class="cm-variable">k</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">while</span> (<span class="cm-variable">m</span><span class="cm-operator">--</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">scanf</span>(<span class="cm-string">"%lld%lld%lld"</span>, <span class="cm-operator">&amp;</span><span class="cm-variable">op</span>, <span class="cm-operator">&amp;</span><span class="cm-variable">x</span>, <span class="cm-operator">&amp;</span><span class="cm-variable">y</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">op</span> <span class="cm-operator">==</span> <span class="cm-number">1</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">scanf</span>(<span class="cm-string">"%lf"</span>, <span class="cm-operator">&amp;</span><span class="cm-variable">k</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">modify</span>(<span class="cm-number">1</span>, <span class="cm-variable">x</span>, <span class="cm-variable">y</span>, <span class="cm-variable">k</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable">op</span> <span class="cm-operator">==</span> <span class="cm-number">2</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">printf</span>(<span class="cm-string">"%.4f\n"</span>, <span class="cm-variable">query</span>(<span class="cm-number">1</span>, <span class="cm-variable">x</span>, <span class="cm-variable">y</span>) <span class="cm-operator">/</span> (<span class="cm-variable-3">double</span>)(<span class="cm-variable">y</span> <span class="cm-operator">-</span> <span class="cm-variable">x</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>));</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">//printf("%lf\n", query(1, x, y));</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">double</span> <span class="cm-variable">num</span> <span class="cm-operator">=</span> <span class="cm-variable">query</span>(<span class="cm-number">1</span>, <span class="cm-variable">x</span>, <span class="cm-variable">y</span>) <span class="cm-operator">/</span> (<span class="cm-variable">y</span> <span class="cm-operator">-</span> <span class="cm-variable">x</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">printf</span>(<span class="cm-string">"%.4f\n"</span>, <span class="cm-variable">query2</span>(<span class="cm-number">1</span>, <span class="cm-variable">x</span>, <span class="cm-variable">y</span>) <span class="cm-operator">/</span> (<span class="cm-variable-3">double</span>)(<span class="cm-variable">y</span> <span class="cm-operator">-</span> <span class="cm-variable">x</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>) <span class="cm-operator">-</span> <span class="cm-variable">num</span> <span class="cm-operator">*</span> <span class="cm-variable">num</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">//printf("%lf\n", query2(1, x, y));</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-number">0</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
	</div>
	</div>
	</div>
	</div>
	</div>
	<div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 10326px;"></div>
	<div class="CodeMirror-gutters" style="display: none; height: 10326px;"></div>
	</div>
	</div>
	</pre>
	<h3 id='树状数组'><span>树状数组</span></h3>
	<p><span>树状数组是用于维护前缀和的数据结构，支持单点的查询和修改，如果要修改区间的值则需要用到差分数组。数字太大时可以在排序后进行离散化。</span></p>
	<p><span>树状数组原理详解：</span></p>
	<p><span>首先我们需要知道lowbit(x)是返回x的最后一个1，例如二进制数10100就返回100.</span></p>
	<p><span>树状数组的核心思想是将一个数分解成若干零件，在维护的时候，直接对这些零件进行处理，在查询的时候再将这些零件组装成我们想要的数。</span></p>
	<p><span>我们先来看看树状数组是如何查询的：</span></p>
	<pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false"
		lang="c++"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c++"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.2px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre>
	</div>
	<div class="CodeMirror-measure"></div>
	<div style="position: relative; z-index: 1;"></div>
	<div class="CodeMirror-code" role="presentation" style="">
		<div class="CodeMirror-activeline" style="position: relative;">
			<div class="CodeMirror-activeline-background CodeMirror-linebackground"></div>
			<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div>
			<pre class=" CodeMirror-line "
				role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ll</span> <span class="cm-def">query</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">p</span>)</span></pre>
		</div>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ll</span> <span class="cm-variable">ans</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> (; <span class="cm-variable">p</span>; <span class="cm-variable">p</span> <span class="cm-operator">-=</span> <span class="cm-variable">lowbit</span>(<span class="cm-variable">p</span>))</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ans</span> <span class="cm-operator">+=</span> <span class="cm-variable">f</span>[<span class="cm-variable">p</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-variable">ans</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
	</div>
	</div>
	</div>
	</div>
	</div>
	<div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 157px;"></div>
	<div class="CodeMirror-gutters" style="display: none; height: 157px;"></div>
	</div>
	</div>
	</pre>
	<p><span>仔细观察可以发现，查询的过程是将数p进行了二进制分解。</span></p>
	<p><span>例如：二进制数p为1101，我们就要将它分解为：</span></p>
	<p><span>1101</span></p>
	<p><span>1100</span></p>
	<p><span>1000</span></p>
	<p><span>分解的方式是减去上一个数的最后一个1</span></p>
	<p><span>那么，为什么这种分解方式是正确的呢，也就是要证明这些零件包含了p之前前的每一个数，并且值包含一次。</span></p>
	<p><span>然后我们在观察它的插入过程：</span></p>
	<pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false"
		lang="c++"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c++"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.2px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre>
	</div>
	<div class="CodeMirror-measure"></div>
	<div style="position: relative; z-index: 1;"></div>
	<div class="CodeMirror-code" role="presentation" style="">
		<div class="CodeMirror-activeline" style="position: relative;">
			<div class="CodeMirror-activeline-background CodeMirror-linebackground"></div>
			<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div>
			<pre class=" CodeMirror-line "
				role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">insert</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">p</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">k</span>)</span></pre>
		</div>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> (; <span class="cm-variable">p</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">n</span>; <span class="cm-variable">p</span> <span class="cm-operator">+=</span> <span class="cm-variable">lowbit</span>(<span class="cm-variable">p</span>))</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">f</span>[<span class="cm-variable">p</span>] <span class="cm-operator">+=</span> <span class="cm-variable">k</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
	</div>
	</div>
	</div>
	</div>
	</div>
	<div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 112px;"></div>
	<div class="CodeMirror-gutters" style="display: none; height: 112px;"></div>
	</div>
	</div>
	</pre>
	<p><span>可以发现如下规律：</span></p>
	<p><span>以4位二进制数为例</span></p>
	<p><span>从0001到1000的数都会被累加到1000当中</span></p>
	<p><span>从1001到1100的数都会被累加到1100当中</span></p>
	<p><span>从1101到1110的数都会被累加到1110当中</span></p>
	<p><span>1111单独加到1111当中</span></p>
	<p><span>例如0110-&gt;1000，0101-&gt;0110-&gt;1000，1010-&gt;1100</span></p>
	<p><span>这些1000,1100,1110,1111就是所有的零件，所有的前缀和都可以由他们组合得到，并且不重不漏，他们的特点是加上lowbit后会变成10000，也就是他们最终会统合到10000中，所有小于等于10000的数都会被统计到10000中，所以我们也递归地证明了所有小于等于1000的数会统计到1000当中。加上lowbit操作本质上是产生进位，填补lowbit位后的第一个0，然后把这个0后面的位都变成0，而从0001到0111中，第一位都是0，所以在不断加上lowbit后，一定会到达1000这个数，把值传给他。1001到1011也是一样，第二位总是0，在不断加上lowbit后，一定会把第二位变成1，也就是1100。而1000，1100，1110,1111均可视为01000,01100,01110,01111，他们的第一位也总是0，所以一定会累加到10000当中，也就通过lowbit形成了一棵树，我们称其为树状数组。</span>
	</p>
	<p><span>单点修改和区间查询：</span></p>
	<pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="c++"
		style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c++"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.2px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre>
	</div>
	<div class="CodeMirror-measure"></div>
	<div style="position: relative; z-index: 1;"></div>
	<div class="CodeMirror-code" role="presentation" style="">
		<div class="CodeMirror-activeline" style="position: relative;">
			<div class="CodeMirror-activeline-background CodeMirror-linebackground"></div>
			<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div>
			<pre class=" CodeMirror-line "
				role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-variable">ll</span> <span class="cm-variable">mod</span> <span class="cm-operator">=</span> <span class="cm-number">50001</span>;</span></pre>
		</div>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define N 1000000</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ll</span> <span class="cm-variable">n</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">struct</span> <span class="cm-def">pp</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ll</span> <span class="cm-variable">num</span>, <span class="cm-variable">rank</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}<span class="cm-variable">a</span>[<span class="cm-variable">N</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ll</span> <span class="cm-variable">f</span>[<span class="cm-variable">N</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">bool</span> <span class="cm-def">cmp</span>(<span class="cm-variable">pp</span> <span class="cm-variable">a</span>, <span class="cm-variable">pp</span> <span class="cm-variable">b</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">a</span>.<span class="cm-variable">num</span> <span class="cm-operator">==</span> <span class="cm-variable">b</span>.<span class="cm-variable">num</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-variable">a</span>.<span class="cm-variable">rank</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">b</span>.<span class="cm-variable">rank</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-variable">a</span>.<span class="cm-variable">num</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">b</span>.<span class="cm-variable">num</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ll</span> <span class="cm-def">lowbit</span>(<span class="cm-variable">ll</span> <span class="cm-variable">x</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-variable">x</span> <span class="cm-operator">&amp;</span> (<span class="cm-operator">-</span><span class="cm-variable">x</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">insert</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">p</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">k</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> (; <span class="cm-variable">p</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">n</span>; <span class="cm-variable">p</span> <span class="cm-operator">+=</span> <span class="cm-variable">lowbit</span>(<span class="cm-variable">p</span>))</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">f</span>[<span class="cm-variable">p</span>] <span class="cm-operator">+=</span> <span class="cm-variable">k</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ll</span> <span class="cm-def">query</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">p</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ll</span> <span class="cm-variable">ans</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> (; <span class="cm-variable">p</span>; <span class="cm-variable">p</span> <span class="cm-operator">-=</span> <span class="cm-variable">lowbit</span>(<span class="cm-variable">p</span>))</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ans</span> <span class="cm-operator">+=</span> <span class="cm-variable">f</span>[<span class="cm-variable">p</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-variable">ans</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ll</span> <span class="cm-variable">ind</span>[<span class="cm-variable">N</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">signed</span> <span class="cm-def">main</span>()</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">//freopen("in.txt", "r", stdin);</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">cin</span> <span class="cm-operator">&gt;&gt;</span> <span class="cm-variable">n</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ll</span> <span class="cm-variable">ans</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-number">1</span>, <span class="cm-variable">n</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">a</span>[<span class="cm-variable">i</span>].<span class="cm-variable">num</span> <span class="cm-operator">=</span> <span class="cm-variable">fr</span>,<span class="cm-variable">a</span>[<span class="cm-variable">i</span>].<span class="cm-variable">rank</span><span class="cm-operator">=</span><span class="cm-variable">i</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">sort</span>(<span class="cm-variable">a</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>, <span class="cm-variable">a</span> <span class="cm-operator">+</span> <span class="cm-number">1</span> <span class="cm-operator">+</span> <span class="cm-variable">n</span>,<span class="cm-variable">cmp</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-number">1</span>, <span class="cm-variable">n</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ind</span>[<span class="cm-variable">a</span>[<span class="cm-variable">i</span>].<span class="cm-variable">rank</span>] <span class="cm-operator">=</span> <span class="cm-variable">i</span>;<span class="cm-comment">//把排名填到原来的位置</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-number">1</span>, <span class="cm-variable">n</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">insert</span>(<span class="cm-variable">ind</span>[<span class="cm-variable">i</span>], <span class="cm-number">1</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ans</span> <span class="cm-operator">+=</span> <span class="cm-variable">i</span> <span class="cm-operator">-</span> <span class="cm-variable">query</span>(<span class="cm-variable">ind</span>[<span class="cm-variable">i</span>]);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">cout</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">ans</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-variable">endl</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
	</div>
	</div>
	</div>
	</div>
	</div>
	<div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1098px;"></div>
	<div class="CodeMirror-gutters" style="display: none; height: 1098px;"></div>
	</div>
	</div>
	</pre>
	<p><span>区间修改和区间查询：</span></p>
	<pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="c++"
		style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c++"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.2px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre>
	</div>
	<div class="CodeMirror-measure"></div>
	<div style="position: relative; z-index: 1;"></div>
	<div class="CodeMirror-code" role="presentation" style="">
		<div class="CodeMirror-activeline" style="position: relative;">
			<div class="CodeMirror-activeline-background CodeMirror-linebackground"></div>
			<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div>
			<pre class=" CodeMirror-line "
				role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;iostream&gt;</span></span></pre>
		</div>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;cstring&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;algorithm&gt;</span></span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">using</span> <span class="cm-keyword">namespace</span> <span class="cm-def">std</span>;</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">typedef</span> <span class="cm-variable-3">long</span> <span class="cm-variable-3">long</span> <span class="cm-variable">LL</span>;</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-variable-3">int</span> <span class="cm-variable">N</span> <span class="cm-operator">=</span> <span class="cm-number">1e5</span> <span class="cm-operator">+</span> <span class="cm-number">10</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-variable">n</span>, <span class="cm-variable">m</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-variable">a</span>[<span class="cm-variable">N</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">LL</span> <span class="cm-variable">tr</span>[<span class="cm-variable">N</span>], <span class="cm-variable">tri</span>[<span class="cm-variable">N</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//tr[]数组是原始数组的差分数组d[i]的树状数组</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//tri[]数组是原始数组的差分数组乘以i即i*d[i]的树状数组</span></span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-def">lowbit</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">x</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">x</span> <span class="cm-operator">&amp;</span> <span class="cm-operator">-</span><span class="cm-variable">x</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">add</span>(<span class="cm-variable">LL</span> <span class="cm-variable">c</span>[], <span class="cm-variable-3">int</span> <span class="cm-variable">x</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">v</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable-3">int</span> <span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-variable">x</span>; <span class="cm-variable">i</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">n</span>; <span class="cm-variable">i</span> <span class="cm-operator">+=</span> <span class="cm-variable">lowbit</span>(<span class="cm-variable">i</span>))</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">c</span>[<span class="cm-variable">i</span>] <span class="cm-operator">+=</span> <span class="cm-variable">v</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">LL</span> <span class="cm-def">query</span>(<span class="cm-variable">LL</span> <span class="cm-variable">c</span>[], <span class="cm-variable-3">int</span> <span class="cm-variable">x</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">LL</span> <span class="cm-variable">res</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable-3">int</span> <span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-variable">x</span>; <span class="cm-variable">i</span>; <span class="cm-variable">i</span> <span class="cm-operator">-=</span> <span class="cm-variable">lowbit</span>(<span class="cm-variable">i</span>))</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">res</span> <span class="cm-operator">+=</span> <span class="cm-variable">c</span>[<span class="cm-variable">i</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">res</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//对应最后一步推导的公式</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">LL</span> <span class="cm-def">get_sum</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">x</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">query</span>(<span class="cm-variable">tr</span>, <span class="cm-variable">x</span>) <span class="cm-operator">*</span> (<span class="cm-variable">x</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>) <span class="cm-operator">-</span> <span class="cm-variable">query</span>(<span class="cm-variable">tri</span>, <span class="cm-variable">x</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-def">main</span>()</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">scanf</span>(<span class="cm-string">"%d%d"</span>, <span class="cm-operator">&amp;</span><span class="cm-variable">n</span>, <span class="cm-operator">&amp;</span><span class="cm-variable">m</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">//输入数组a[i]</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable-3">int</span> <span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>; <span class="cm-variable">i</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">n</span>; <span class="cm-operator">++</span><span class="cm-variable">i</span>) <span class="cm-variable">scanf</span>(<span class="cm-string">"%d"</span>, <span class="cm-operator">&amp;</span><span class="cm-variable">a</span>[<span class="cm-variable">i</span>]);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">//先构造两个数组 d[i] 和 i*d[i]</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable-3">int</span> <span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>; <span class="cm-variable">i</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">n</span>; <span class="cm-operator">++</span><span class="cm-variable">i</span>) </span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">tr</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-variable">a</span>[<span class="cm-variable">i</span>] <span class="cm-operator">-</span> <span class="cm-variable">a</span>[<span class="cm-variable">i</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>], <span class="cm-variable">tri</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-variable">tr</span>[<span class="cm-variable">i</span>] <span class="cm-operator">*</span> <span class="cm-variable">i</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">//原地 O(n) 建树状数组</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable-3">int</span> <span class="cm-variable">x</span> <span class="cm-operator">=</span> <span class="cm-number">1</span>; <span class="cm-variable">x</span> <span class="cm-operator">&lt;=</span> <span class="cm-variable">n</span>; <span class="cm-operator">++</span><span class="cm-variable">x</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">for</span> (<span class="cm-variable-3">int</span> <span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-variable">x</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>; <span class="cm-variable">i</span> <span class="cm-operator">&gt;=</span> <span class="cm-variable">x</span> <span class="cm-operator">-</span> <span class="cm-variable">lowbit</span>(<span class="cm-variable">x</span>) <span class="cm-operator">+</span> <span class="cm-number">1</span>; <span class="cm-variable">i</span> <span class="cm-operator">-=</span> <span class="cm-variable">lowbit</span>(<span class="cm-variable">i</span>))</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">tr</span>[<span class="cm-variable">x</span>] <span class="cm-operator">+=</span> <span class="cm-variable">tr</span>[<span class="cm-variable">i</span>], <span class="cm-variable">tri</span>[<span class="cm-variable">x</span>] <span class="cm-operator">+=</span> <span class="cm-variable">tri</span>[<span class="cm-variable">i</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">//读入查询</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">while</span> (<span class="cm-variable">m</span><span class="cm-operator">--</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">char</span> <span class="cm-variable">op</span>[<span class="cm-number">2</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">l</span>, <span class="cm-variable">r</span>, <span class="cm-variable">c</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">scanf</span>(<span class="cm-string">"%s"</span>, <span class="cm-variable">op</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">op</span>[<span class="cm-number">0</span>] <span class="cm-operator">==</span> <span class="cm-string">'Q'</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">scanf</span>(<span class="cm-string">"%d%d"</span>, <span class="cm-operator">&amp;</span><span class="cm-variable">l</span>, <span class="cm-operator">&amp;</span><span class="cm-variable">r</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">printf</span>(<span class="cm-string">"%lld\n"</span>, <span class="cm-variable">get_sum</span>(<span class="cm-variable">r</span>) <span class="cm-operator">-</span> <span class="cm-variable">get_sum</span>(<span class="cm-variable">l</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>));</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">else</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">scanf</span>(<span class="cm-string">"%d%d%d"</span>, <span class="cm-operator">&amp;</span><span class="cm-variable">l</span>, <span class="cm-operator">&amp;</span><span class="cm-variable">r</span>, <span class="cm-operator">&amp;</span><span class="cm-variable">c</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">add</span>(<span class="cm-variable">tr</span>, <span class="cm-variable">l</span>, <span class="cm-variable">c</span>), <span class="cm-variable">add</span>(<span class="cm-variable">tr</span>, <span class="cm-variable">r</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>, <span class="cm-operator">-</span><span class="cm-variable">c</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">add</span>(<span class="cm-variable">tri</span>, <span class="cm-variable">l</span>, <span class="cm-variable">l</span> <span class="cm-operator">*</span> <span class="cm-variable">c</span>), <span class="cm-variable">add</span>(<span class="cm-variable">tri</span>, <span class="cm-variable">r</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>, (<span class="cm-variable">r</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>) <span class="cm-operator">*</span> <span class="cm-operator">-</span><span class="cm-variable">c</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-number">0</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">链接：https</span>:<span class="cm-comment">//www.acwing.com/solution/content/44886/</span></span></pre>
	</div>
	</div>
	</div>
	</div>
	</div>
	<div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1702px;"></div>
	<div class="CodeMirror-gutters" style="display: none; height: 1702px;"></div>
	</div>
	</div>
	</pre>
	<p>&nbsp;</p>
	<h2 id='博弈论'><span>博弈论</span></h2>
	<p><span>我一直以为博弈论是一个十分玄学的东西（</span><del><span>现在也这么认为</span></del><span>），不过在比赛中遇到的博弈论一般都是从某个基本的模型变形过来的，而学习了sg值后又将博弈论的状态和图联系了起来，虽然在时间上复杂度会过高不能作为提交的答案，但是可以利用sg值进行打表找规律，遇到博弈论时不会那么无助。mex是从0开始的集合中未出现的最小自然数，而sg函数是所有子问题的sg值构成集合的mex值，如果求解的子问题和多个子问题有关，让ans=0和每个子问题的sg值进行异或即可。最后ans=0则必败，否则为必胜。</span>
	</p>
	<p><span>求sg的代码（主要用于打表）</span></p>
	<pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="c++"
		style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c++"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.2px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre>
	</div>
	<div class="CodeMirror-measure"></div>
	<div style="position: relative; z-index: 1;"></div>
	<div class="CodeMirror-code" role="presentation" style="">
		<div class="CodeMirror-activeline" style="position: relative;">
			<div class="CodeMirror-activeline-background CodeMirror-linebackground"></div>
			<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div>
			<pre class=" CodeMirror-line "
				role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-variable">n</span>, <span class="cm-variable">k</span>;</span></pre>
		</div>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ll</span> <span class="cm-variable">sg</span>[<span class="cm-variable">N</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-variable">num</span>[<span class="cm-variable">N</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ll</span> <span class="cm-variable">a</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-def">SG</span>(<span class="cm-variable">ll</span> <span class="cm-variable">x</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">sg</span>[<span class="cm-variable">x</span>] <span class="cm-operator">!=</span> <span class="cm-operator">-</span><span class="cm-number">1</span>) <span class="cm-keyword">return</span> <span class="cm-variable">sg</span>[<span class="cm-variable">x</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">x</span> <span class="cm-operator">&gt;=</span> <span class="cm-variable">a</span>) <span class="cm-keyword">return</span> <span class="cm-number">0</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">map</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">int</span>, <span class="cm-variable-3">bool</span><span class="cm-operator">&gt;</span> <span class="cm-variable">vis</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">int</span> <span class="cm-variable">val</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-number">2</span>, <span class="cm-number">9</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">val</span> <span class="cm-operator">=</span> <span class="cm-variable">SG</span>(<span class="cm-variable">i</span> <span class="cm-operator">*</span> <span class="cm-variable">x</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">vis</span>[<span class="cm-variable">val</span>] <span class="cm-operator">=</span> <span class="cm-atom">true</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-number">0</span>, <span class="cm-variable">INT_MAX</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">vis</span>.<span class="cm-variable">count</span>(<span class="cm-variable">i</span>) <span class="cm-operator">==</span> <span class="cm-number">0</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">sg</span>[<span class="cm-variable">x</span>] <span class="cm-operator">=</span> <span class="cm-variable">i</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">break</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-variable">sg</span>[<span class="cm-variable">x</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
	</div>
	</div>
	</div>
	</div>
	</div>
	<div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 560px;"></div>
	<div class="CodeMirror-gutters" style="display: none; height: 560px;"></div>
	</div>
	</div>
	</pre>
	<p><span>求解博弈论，就要找出所有的必胜态和必败态，能一步到达必败态的都为必胜态，所有后继状态都为必胜态的为必败态。</span></p>
	<p><span>下面列出几个基本的结论：</span></p>
	<h3 id='1）巴什博弈'><span>（1）巴什博弈</span></h3>
	<p><span>n个物品， 每次可以取[1, m] 中任意一个， 不能取的人输</span></p>
	<p><span>如果n % (m + 1) == 0 则先手必败， 反之先手必胜</span></p>
	<p><span>设 ret = n % （m + 1)</span></p>
	<p><span>如果 ret 不为0 则先手可以拿 ret 个， 使得剩下的个数为 m + 1 的倍数</span></p>
	<p><span>之后无论后手拿[1, m] 中的任意一个x， 先手都必定可以拿 m + 1 - x， 所以先手必胜， 反之， 如果 ret 为 0 , 那无论先手拿多少个后手都必定可以按照上述策略应对， 先手必败</span>
	</p>
	<h3 id='2）对称博弈'><span>（2）对称博弈</span></h3>
	<p><span>有 n 个石子， 每次可以拿连续的[1, m] 中的任意一个， 不能拿的人就输了</span></p>
	<p><span>m为1时， n为奇数先手赢， 反之后手赢</span></p>
	<p><span>m大于1时 先手赢</span></p>
	<p><span>m为1时的结论显然是对的</span></p>
	<p><span>m不为1时</span></p>
	<p><span>先手可以通过一些手段将石子平分成两堆完全一致的石子(奇数拿中间一个, 偶数拿中间两个)</span></p>
	<p><span>同时对于如下问题</span></p>
	<p><span>在一个半径为 R 的圆内放半径为 r 的圆， 圆不能互相有重叠部分（但是可以相切), 不能放的人就输了</span></p>
	<p><span>当R&gt;r时先手必胜，可以把圆放在正中间，然后就是对称博弈的问题了。</span></p>
	<h3 id='3）斐波那契博弈'><span>（3）斐波那契博弈</span></h3>
	<p><span>有 n 个石子， 第一个人至少取1个， 最多随便取， 但是第一回合不能直接取完</span></p>
	<p><span>之后每个人取得数目至少为1， 至多为上一个人取的石子数目的二倍， 不能取的人输</span></p>
	<p><span>结论 : 当 n 为斐波那契数列中的某个数字时， 先手必败， 反之必胜</span></p>
	<h3 id='4）威佐夫博弈'><span>（4）威佐夫博弈</span></h3>
	<p><span>有两堆石子， 每个人可以从一堆取任意个石子或者从两堆取任意相同数目的石子， 不能取的人就输了</span></p>
	<p><span>结论 ： 设两堆为 a, b 且 a &gt;= b , S为黄金分割数 ( sqrt(5) + 1) / 2</span></p>
	<p><span> 则 b = floor(S * (a - b)) 时 先手必败， 反之必胜 </span></p>
	<h1 id='分块和莫队'><span>分块和莫队</span></h1>
	<p><span>区间分块用于解决多个区间的查询和修改的问题。考虑到解决问题时，区间一般比较难处理的是区间的两个端点，而区间中很大一部分其实很好维护。所以我们采用分块的思想，将区间的两个端点置于不同的两个块中，直接用暴力的方法求解两个区间端点到块的端点的答案，而对于中间的区间，我们可以用一个tag数组来表示他们的变化，在查询的时候将tag数组反映到答案中即可。块的长度取sqrt(n)的时候，复杂度最小。</span>
	</p>
	<pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false"
		lang="c++"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c++"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.2px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre>
	</div>
	<div class="CodeMirror-measure"></div>
	<div style="position: relative; z-index: 1;"></div>
	<div class="CodeMirror-code" role="presentation" style="">
		<div class="CodeMirror-activeline" style="position: relative;">
			<div class="CodeMirror-activeline-background CodeMirror-linebackground"></div>
			<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div>
			<pre class=" CodeMirror-line "
				role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-comment">//下标和块号从0开始<span class="cm-tab" role="presentation" cm-text="	"> </span></span></span></pre>
		</div>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">block</span> <span class="cm-operator">=</span> <span class="cm-variable">sqrt</span>(<span class="cm-variable">k</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">bn</span> <span class="cm-operator">=</span> <span class="cm-variable">ceil</span>(<span class="cm-variable">k</span> <span class="cm-operator">/</span> <span class="cm-variable">block</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> (<span class="cm-variable-3">int</span> <span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable">i</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">k</span>; <span class="cm-variable">i</span><span class="cm-operator">++</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">be</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-variable">i</span> <span class="cm-operator">/</span> <span class="cm-variable">block</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> (<span class="cm-variable-3">int</span> <span class="cm-variable">i</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>; <span class="cm-variable">i</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">bn</span>; <span class="cm-variable">i</span><span class="cm-operator">++</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">l</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-variable">i</span> <span class="cm-operator">*</span> <span class="cm-variable">block</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">r</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-variable">l</span>[<span class="cm-variable">i</span>] <span class="cm-operator">+</span> <span class="cm-variable">block</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">r</span>[<span class="cm-variable">bn</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>] <span class="cm-operator">=</span> <span class="cm-variable">min</span>(<span class="cm-variable">r</span>[<span class="cm-variable">bn</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>], <span class="cm-variable">k</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>);</span></pre>
	</div>
	</div>
	</div>
	</div>
	</div>
	<div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 291px;"></div>
	<div class="CodeMirror-gutters" style="display: none; height: 291px;"></div>
	</div>
	</div>
	</pre>
	<pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false"
		lang="c++"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c++"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.2px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre>
	</div>
	<div class="CodeMirror-measure"></div>
	<div style="position: relative; z-index: 1;"></div>
	<div class="CodeMirror-code" role="presentation" style="">
		<div class="CodeMirror-activeline" style="position: relative;">
			<div class="CodeMirror-activeline-background CodeMirror-linebackground"></div>
			<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div>
			<pre class=" CodeMirror-line "
				role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//下标块号从1开始</span></span></pre>
		</div>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">block</span> <span class="cm-operator">=</span> <span class="cm-variable">floor</span>(<span class="cm-variable">sqrt</span>(<span class="cm-variable">n</span>));</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">num</span> <span class="cm-operator">=</span> (<span class="cm-variable">n</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>) <span class="cm-operator">/</span> <span class="cm-variable">block</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-number">1</span>, <span class="cm-variable">n</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">l</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> (<span class="cm-variable">i</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>) <span class="cm-operator">*</span> <span class="cm-variable">block</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">r</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-variable">i</span> <span class="cm-operator">*</span> <span class="cm-variable">block</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">belong</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> (<span class="cm-variable">i</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>) <span class="cm-operator">/</span> <span class="cm-variable">block</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
	</div>
	</div>
	</div>
	</div>
	</div>
	<div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 202px;"></div>
	<div class="CodeMirror-gutters" style="display: none; height: 202px;"></div>
	</div>
	</div>
	</pre>
	<p><span>维护区间和：这个简单，直接加起来更新ans即可</span></p>
	<pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="c++"
		style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c++"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.2px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre>
	</div>
	<div class="CodeMirror-measure"></div>
	<div style="position: relative; z-index: 1;"></div>
	<div class="CodeMirror-code" role="presentation" style="">
		<div class="CodeMirror-activeline" style="position: relative;">
			<div class="CodeMirror-activeline-background CodeMirror-linebackground"></div>
			<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div>
			<pre class=" CodeMirror-line "
				role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//按下标来分</span></span></pre>
		</div>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#pragma warning(disable : 4996)</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">using</span> <span class="cm-keyword">namespace</span> <span class="cm-def">std</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define rep(l,a,b) for(ll l=a;l&lt;=b;l++)</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define repp(l,a,b) for(ll l=a;l&gt;=b;l--)</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define mem(x) memset(x,0,sizeof(x))</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define fr fast_IO::read()</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define INF 0x3f3f3f3f</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">namespace</span> <span class="cm-def">fast_IO</span> {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ll</span> <span class="cm-def">read</span>() {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ll</span> <span class="cm-variable">num</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">char</span> <span class="cm-variable">c</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">bool</span> <span class="cm-variable">tag</span> <span class="cm-operator">=</span> <span class="cm-atom">false</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">while</span> ((<span class="cm-variable">c</span> <span class="cm-operator">=</span> <span class="cm-variable">getchar</span>()) <span class="cm-operator">!=</span> <span class="cm-string">'-'</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">c</span> <span class="cm-operator">!=</span> <span class="cm-string">'+'</span> <span class="cm-operator">&amp;&amp;</span> (<span class="cm-variable">c</span> <span class="cm-operator">&lt;</span> <span class="cm-string">'0'</span> <span class="cm-operator">||</span> <span class="cm-variable">c</span> <span class="cm-operator">&gt;</span> <span class="cm-string">'9'</span>) <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">~c</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-operator">!</span><span class="cm-variable">~c</span>)<span class="cm-keyword">return</span> <span class="cm-variable">EOF</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">c</span> <span class="cm-operator">==</span> <span class="cm-string">'-'</span>)<span class="cm-variable">tag</span> <span class="cm-operator">=</span> <span class="cm-atom">true</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable">c</span> <span class="cm-operator">==</span> <span class="cm-string">'+'</span>)<span class="cm-variable">tag</span> <span class="cm-operator">=</span> <span class="cm-atom">false</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span> <span class="cm-variable">num</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span> <span class="cm-variable">^</span> <span class="cm-number">48</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">while</span> ((<span class="cm-variable">c</span> <span class="cm-operator">=</span> <span class="cm-variable">getchar</span>()) <span class="cm-operator">&gt;=</span> <span class="cm-string">'0'</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">c</span> <span class="cm-operator">&lt;=</span> <span class="cm-string">'9'</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">num</span> <span class="cm-operator">=</span> (<span class="cm-variable">num</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>) <span class="cm-operator">+</span> (<span class="cm-variable">num</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">3</span>) <span class="cm-operator">+</span> (<span class="cm-variable">c</span> <span class="cm-variable">^</span> <span class="cm-number">48</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">tag</span>)<span class="cm-keyword">return</span> <span class="cm-operator">-</span><span class="cm-variable">num</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-variable">num</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-variable">ll</span> <span class="cm-variable">mod</span> <span class="cm-operator">=</span> <span class="cm-number">50001</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define N 1000000</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-variable">n</span>, <span class="cm-variable">k</span>, <span class="cm-variable">block</span>, <span class="cm-variable">num</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-variable">a</span>[<span class="cm-variable">N</span>], <span class="cm-variable">sum</span>[<span class="cm-variable">N</span>], <span class="cm-variable">l</span>[<span class="cm-variable">N</span>], <span class="cm-variable">r</span>[<span class="cm-variable">N</span>], <span class="cm-variable">tag</span>[<span class="cm-variable">N</span>], <span class="cm-variable">belong</span>[<span class="cm-variable">N</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">newlen</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">x</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">y</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">c</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ll</span> <span class="cm-variable">nl</span> <span class="cm-operator">=</span> <span class="cm-variable">belong</span>[<span class="cm-variable">x</span>], <span class="cm-variable">nr</span> <span class="cm-operator">=</span> <span class="cm-variable">belong</span>[<span class="cm-variable">y</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">nl</span> <span class="cm-operator">==</span> <span class="cm-variable">nr</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-variable">x</span>, <span class="cm-variable">y</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">a</span>[<span class="cm-variable">i</span>] <span class="cm-operator">+=</span> <span class="cm-variable">c</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-variable">x</span>, <span class="cm-variable">r</span>[<span class="cm-variable">nl</span>])</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">a</span>[<span class="cm-variable">i</span>] <span class="cm-operator">+=</span> <span class="cm-variable">c</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-variable">l</span>[<span class="cm-variable">nr</span>], <span class="cm-variable">y</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">a</span>[<span class="cm-variable">i</span>] <span class="cm-operator">+=</span> <span class="cm-variable">c</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-variable">nl</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>, <span class="cm-variable">nr</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">tag</span>[<span class="cm-variable">i</span>] <span class="cm-operator">+=</span> <span class="cm-variable">c</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ll</span> <span class="cm-def">query</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">x</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">int</span> <span class="cm-variable">nx</span> <span class="cm-operator">=</span> <span class="cm-variable">belong</span>[<span class="cm-variable">x</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-variable">a</span>[<span class="cm-variable">x</span>] <span class="cm-operator">+</span> <span class="cm-variable">tag</span>[<span class="cm-variable">nx</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ll</span> <span class="cm-def">query2</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">x</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">y</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ll</span> <span class="cm-variable">ans</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ll</span> <span class="cm-variable">nl</span> <span class="cm-operator">=</span> <span class="cm-variable">belong</span>[<span class="cm-variable">x</span>], <span class="cm-variable">nr</span> <span class="cm-operator">=</span> <span class="cm-variable">belong</span>[<span class="cm-variable">y</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-variable">x</span>, <span class="cm-variable">r</span>[<span class="cm-variable">nl</span>])</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ans</span> <span class="cm-operator">+=</span> <span class="cm-variable">a</span>[<span class="cm-variable">i</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-variable">l</span>[<span class="cm-variable">nr</span>], <span class="cm-variable">y</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ans</span> <span class="cm-operator">+=</span> <span class="cm-variable">a</span>[<span class="cm-variable">i</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-variable">nl</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>, <span class="cm-variable">nr</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ans</span> <span class="cm-operator">+=</span> <span class="cm-variable">tag</span>[<span class="cm-variable">i</span>] <span class="cm-operator">*</span> <span class="cm-variable">block</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-variable">ans</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">signed</span> <span class="cm-def">main</span>()</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">//freopen("in.txt", "r", stdin);</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">n</span> <span class="cm-operator">=</span> <span class="cm-variable">fr</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-number">1</span>, <span class="cm-variable">n</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">a</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-variable">fr</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">block</span> <span class="cm-operator">=</span> <span class="cm-variable">floor</span>(<span class="cm-variable">sqrt</span>(<span class="cm-variable">n</span>));</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">num</span> <span class="cm-operator">=</span> (<span class="cm-variable">n</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>) <span class="cm-operator">/</span> <span class="cm-variable">block</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-number">1</span>, <span class="cm-variable">n</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">l</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> (<span class="cm-variable">i</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>) <span class="cm-operator">*</span> <span class="cm-variable">block</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">r</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-variable">i</span> <span class="cm-operator">*</span> <span class="cm-variable">block</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">belong</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> (<span class="cm-variable">i</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>) <span class="cm-operator">/</span> <span class="cm-variable">block</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-number">1</span>, <span class="cm-variable">num</span>)<span class="cm-comment">//预处理</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">rep</span>(<span class="cm-variable">j</span>, <span class="cm-variable">l</span>[<span class="cm-variable">i</span>], <span class="cm-variable">r</span>[<span class="cm-variable">i</span>])</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">sum</span>[<span class="cm-variable">i</span>] <span class="cm-operator">+=</span> <span class="cm-variable">a</span>[<span class="cm-variable">j</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">mem</span>(<span class="cm-variable">tag</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-number">1</span>, <span class="cm-variable">n</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">int</span> <span class="cm-variable">opt</span>, <span class="cm-variable">l</span>, <span class="cm-variable">r</span>, <span class="cm-variable">c</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">opt</span> <span class="cm-operator">=</span> <span class="cm-variable">fr</span>, <span class="cm-variable">l</span> <span class="cm-operator">=</span> <span class="cm-variable">fr</span>, <span class="cm-variable">r</span> <span class="cm-operator">=</span> <span class="cm-variable">fr</span>, <span class="cm-variable">c</span> <span class="cm-operator">=</span> <span class="cm-variable">fr</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">opt</span> <span class="cm-operator">==</span> <span class="cm-number">0</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">newlen</span>(<span class="cm-variable">l</span>, <span class="cm-variable">r</span>, <span class="cm-variable">c</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">printf</span>(<span class="cm-string">"%lld\n"</span>, <span class="cm-variable">query</span>(<span class="cm-variable">r</span>));</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
	</div>
	</div>
	</div>
	</div>
	</div>
	<div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 2061px;"></div>
	<div class="CodeMirror-gutters" style="display: none; height: 2061px;"></div>
	</div>
	</div>
	</pre>
	<p><span>某个区间中小于某个数的个数：</span></p>
	<p><span>涉及到个数的时候，可以先用一个数组备份原来的数据，然后让另一个数组分块排序。两个端点采用暴力的做法更新答案个查询答案（两端点可别用二分啊，排序后的下标会有变化），中间的块用二分的方法。统计出来即可。</span>
	</p>
	<pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="c++"
		style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="c++"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.2px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre>
	</div>
	<div class="CodeMirror-measure"></div>
	<div style="position: relative; z-index: 1;"></div>
	<div class="CodeMirror-code" role="presentation" style="">
		<div class="CodeMirror-activeline" style="position: relative;">
			<div class="CodeMirror-activeline-background CodeMirror-linebackground"></div>
			<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div>
			<pre class=" CodeMirror-line "
				role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;cstdio&gt;</span></span></pre>
		</div>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;iostream&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;math.h&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;algorithm&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;cstring&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;unordered_map&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;string&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;queue&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;map&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;ctime&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;limits.h&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;stack&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;set&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#include &lt;iomanip&gt;</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define ll long long</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define int long long</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define um unordered_map</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#pragma warning(disable : 4996)</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">using</span> <span class="cm-keyword">namespace</span> <span class="cm-def">std</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define rep(l,a,b) for(ll l=a;l&lt;=b;l++)</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define repp(l,a,b) for(ll l=a;l&gt;=b;l--)</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define mem(x) memset(x,0,sizeof(x))</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define fr fast_IO::read()</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define INF 0x3f3f3f3f</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">namespace</span> <span class="cm-def">fast_IO</span> {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ll</span> <span class="cm-def">read</span>() {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">ll</span> <span class="cm-variable">num</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">char</span> <span class="cm-variable">c</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-3">bool</span> <span class="cm-variable">tag</span> <span class="cm-operator">=</span> <span class="cm-atom">false</span>;</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">while</span> ((<span class="cm-variable">c</span> <span class="cm-operator">=</span> <span class="cm-variable">getchar</span>()) <span class="cm-operator">!=</span> <span class="cm-string">'-'</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">c</span> <span class="cm-operator">!=</span> <span class="cm-string">'+'</span> <span class="cm-operator">&amp;&amp;</span> (<span class="cm-variable">c</span> <span class="cm-operator">&lt;</span> <span class="cm-string">'0'</span> <span class="cm-operator">||</span> <span class="cm-variable">c</span> <span class="cm-operator">&gt;</span> <span class="cm-string">'9'</span>) <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">~c</span>);</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-operator">!</span><span class="cm-variable">~c</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">EOF</span>;</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">c</span> <span class="cm-operator">==</span> <span class="cm-string">'-'</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">tag</span> <span class="cm-operator">=</span> <span class="cm-atom">true</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-variable">c</span> <span class="cm-operator">==</span> <span class="cm-string">'+'</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">tag</span> <span class="cm-operator">=</span> <span class="cm-atom">false</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">else</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">num</span> <span class="cm-operator">=</span> <span class="cm-variable">c</span> <span class="cm-variable">^</span> <span class="cm-number">48</span>;</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">while</span> ((<span class="cm-variable">c</span> <span class="cm-operator">=</span> <span class="cm-variable">getchar</span>()) <span class="cm-operator">&gt;=</span> <span class="cm-string">'0'</span> <span class="cm-operator">&amp;&amp;</span> <span class="cm-variable">c</span> <span class="cm-operator">&lt;=</span> <span class="cm-string">'9'</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">num</span> <span class="cm-operator">=</span> (<span class="cm-variable">num</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">1</span>) <span class="cm-operator">+</span> (<span class="cm-variable">num</span> <span class="cm-operator">&lt;&lt;</span> <span class="cm-number">3</span>) <span class="cm-operator">+</span> (<span class="cm-variable">c</span> <span class="cm-variable">^</span> <span class="cm-number">48</span>);</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">tag</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-operator">-</span><span class="cm-variable">num</span>;</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">num</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-variable">ll</span> <span class="cm-variable">mod</span> <span class="cm-operator">=</span> <span class="cm-number">50001</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-meta">#define N 1000000</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-variable">n</span>, <span class="cm-variable">k</span>, <span class="cm-variable">block</span>, <span class="cm-variable">num</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">int</span> <span class="cm-variable">a</span>[<span class="cm-variable">N</span>], <span class="cm-variable">sum</span>[<span class="cm-variable">N</span>], <span class="cm-variable">l</span>[<span class="cm-variable">N</span>], <span class="cm-variable">r</span>[<span class="cm-variable">N</span>], <span class="cm-variable">tag</span>[<span class="cm-variable">N</span>], <span class="cm-variable">belong</span>[<span class="cm-variable">N</span>], <span class="cm-variable">b</span>[<span class="cm-variable">N</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">void</span> <span class="cm-def">newlen</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">x</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">y</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">c</span>) {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">ll</span> <span class="cm-variable">nl</span> <span class="cm-operator">=</span> <span class="cm-variable">belong</span>[<span class="cm-variable">x</span>], <span class="cm-variable">nr</span> <span class="cm-operator">=</span> <span class="cm-variable">belong</span>[<span class="cm-variable">y</span>];</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">nl</span> <span class="cm-operator">==</span> <span class="cm-variable">nr</span>) {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-variable">x</span>, <span class="cm-variable">y</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">a</span>[<span class="cm-variable">i</span>] <span class="cm-operator">+=</span> <span class="cm-variable">c</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-variable">l</span>[<span class="cm-variable">nl</span>], <span class="cm-variable">r</span>[<span class="cm-variable">nl</span>])</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">b</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-variable">a</span>[<span class="cm-variable">i</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">sort</span>(<span class="cm-variable">b</span> <span class="cm-operator">+</span> <span class="cm-variable">l</span>[<span class="cm-variable">nl</span>], <span class="cm-variable">b</span> <span class="cm-operator">+</span> <span class="cm-variable">r</span>[<span class="cm-variable">nl</span>] <span class="cm-operator">+</span> <span class="cm-number">1</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } <span class="cm-keyword">else</span> {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-variable">x</span>, <span class="cm-variable">r</span>[<span class="cm-variable">nl</span>])</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">a</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-variable">a</span>[<span class="cm-variable">i</span>] <span class="cm-operator">+</span> <span class="cm-variable">c</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-variable">l</span>[<span class="cm-variable">nl</span>], <span class="cm-variable">r</span>[<span class="cm-variable">nl</span>])</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">b</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-variable">a</span>[<span class="cm-variable">i</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">sort</span>(<span class="cm-variable">b</span> <span class="cm-operator">+</span> <span class="cm-variable">l</span>[<span class="cm-variable">nl</span>], <span class="cm-variable">b</span> <span class="cm-operator">+</span> <span class="cm-variable">r</span>[<span class="cm-variable">nl</span>] <span class="cm-operator">+</span> <span class="cm-number">1</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-variable">nl</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>, <span class="cm-variable">nr</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>) {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">tag</span>[<span class="cm-variable">i</span>] <span class="cm-operator">+=</span> <span class="cm-variable">c</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-variable">l</span>[<span class="cm-variable">nr</span>], <span class="cm-variable">y</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">a</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-variable">a</span>[<span class="cm-variable">i</span>] <span class="cm-operator">+</span> <span class="cm-variable">c</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-variable">l</span>[<span class="cm-variable">nr</span>], <span class="cm-variable">r</span>[<span class="cm-variable">nr</span>])</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">b</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-variable">a</span>[<span class="cm-variable">i</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">sort</span>(<span class="cm-variable">b</span> <span class="cm-operator">+</span> <span class="cm-variable">l</span>[<span class="cm-variable">nr</span>], <span class="cm-variable">b</span> <span class="cm-operator">+</span> <span class="cm-variable">r</span>[<span class="cm-variable">nr</span>] <span class="cm-operator">+</span> <span class="cm-number">1</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">ll</span> <span class="cm-def">query2</span>(<span class="cm-variable-3">int</span> <span class="cm-variable">x</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">y</span>, <span class="cm-variable-3">int</span> <span class="cm-variable">cc</span>) {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">ll</span> <span class="cm-variable">nl</span> <span class="cm-operator">=</span> <span class="cm-variable">belong</span>[<span class="cm-variable">x</span>], <span class="cm-variable">nr</span> <span class="cm-operator">=</span> <span class="cm-variable">belong</span>[<span class="cm-variable">y</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">ll</span> <span class="cm-variable">ans</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>;</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">nl</span> <span class="cm-operator">==</span> <span class="cm-variable">nr</span>) {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-variable">x</span>, <span class="cm-variable">y</span>)</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">a</span>[<span class="cm-variable">i</span>] <span class="cm-operator">+</span> <span class="cm-variable">tag</span>[<span class="cm-variable">nl</span>] <span class="cm-operator">&lt;</span> <span class="cm-variable">cc</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ans</span><span class="cm-operator">++</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  } <span class="cm-keyword">else</span> {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-variable">x</span>, <span class="cm-variable">r</span>[<span class="cm-variable">nl</span>])</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">a</span>[<span class="cm-variable">i</span>] <span class="cm-operator">+</span> <span class="cm-variable">tag</span>[<span class="cm-variable">nl</span>] <span class="cm-operator">&lt;</span> <span class="cm-variable">cc</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ans</span><span class="cm-operator">++</span>;</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-variable">nl</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>, <span class="cm-variable">nr</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>) {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ans</span> <span class="cm-operator">+=</span> <span class="cm-variable">lower_bound</span>(<span class="cm-variable">b</span> <span class="cm-operator">+</span> <span class="cm-variable">l</span>[<span class="cm-variable">i</span>], <span class="cm-variable">b</span> <span class="cm-operator">+</span> <span class="cm-variable">r</span>[<span class="cm-variable">i</span>] <span class="cm-operator">+</span> <span class="cm-number">1</span>, <span class="cm-variable">cc</span> <span class="cm-operator">-</span> <span class="cm-variable">tag</span>[<span class="cm-variable">i</span>]) <span class="cm-operator">-</span> <span class="cm-variable">b</span> <span class="cm-operator">-</span> <span class="cm-variable">l</span>[<span class="cm-variable">i</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  }</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-variable">l</span>[<span class="cm-variable">nr</span>], <span class="cm-variable">y</span>)</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">a</span>[<span class="cm-variable">i</span>] <span class="cm-operator">+</span> <span class="cm-variable">tag</span>[<span class="cm-variable">nr</span>] <span class="cm-operator">&lt;</span> <span class="cm-variable">cc</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">ans</span><span class="cm-operator">++</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable">ans</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-3">signed</span> <span class="cm-def">main</span>() {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">//freopen("in.txt", "r", stdin);</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">n</span> <span class="cm-operator">=</span> <span class="cm-variable">fr</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-number">1</span>, <span class="cm-variable">n</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">a</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-variable">fr</span>, <span class="cm-variable">b</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-variable">a</span>[<span class="cm-variable">i</span>];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">block</span> <span class="cm-operator">=</span> <span class="cm-variable">floor</span>(<span class="cm-variable">sqrt</span>(<span class="cm-variable">n</span>));</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">num</span> <span class="cm-operator">=</span> (<span class="cm-variable">n</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>) <span class="cm-operator">/</span> <span class="cm-variable">block</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-number">1</span>, <span class="cm-variable">n</span>) {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">l</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> (<span class="cm-variable">i</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>) <span class="cm-operator">*</span> <span class="cm-variable">block</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">r</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> <span class="cm-variable">i</span> <span class="cm-operator">*</span> <span class="cm-variable">block</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">belong</span>[<span class="cm-variable">i</span>] <span class="cm-operator">=</span> (<span class="cm-variable">i</span> <span class="cm-operator">-</span> <span class="cm-number">1</span>) <span class="cm-operator">/</span> <span class="cm-variable">block</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-number">1</span>, <span class="cm-variable">num</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">sort</span>(<span class="cm-variable">b</span> <span class="cm-operator">+</span> <span class="cm-variable">l</span>[<span class="cm-variable">i</span>], <span class="cm-variable">b</span> <span class="cm-operator">+</span> <span class="cm-variable">r</span>[<span class="cm-variable">i</span>] <span class="cm-operator">+</span> <span class="cm-number">1</span>);</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">mem</span>(<span class="cm-variable">tag</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">rep</span>(<span class="cm-variable">i</span>, <span class="cm-number">1</span>, <span class="cm-variable">n</span>) {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable-3">int</span> <span class="cm-variable">opt</span>, <span class="cm-variable">l</span>, <span class="cm-variable">r</span>, <span class="cm-variable">c</span>;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">opt</span> <span class="cm-operator">=</span> <span class="cm-variable">fr</span>, <span class="cm-variable">l</span> <span class="cm-operator">=</span> <span class="cm-variable">fr</span>, <span class="cm-variable">r</span> <span class="cm-operator">=</span> <span class="cm-variable">fr</span>, <span class="cm-variable">c</span> <span class="cm-operator">=</span> <span class="cm-variable">fr</span>;</span></pre>
		<pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">if</span> (<span class="cm-variable">opt</span> <span class="cm-operator">==</span> <span class="cm-number">0</span>)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">newlen</span>(<span class="cm-variable">l</span>, <span class="cm-variable">r</span>, <span class="cm-variable">c</span>);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-keyword">else</span></span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">printf</span>(<span class="cm-string">"%lld\n"</span>, <span class="cm-variable">query2</span>(<span class="cm-variable">l</span>, <span class="cm-variable">r</span>, <span class="cm-variable">c</span> <span class="cm-operator">*</span> <span class="cm-variable">c</span>));</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
	</div>
	</div>
	</div>
	</div>
	</div>
	<div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 3046px;"></div>
	<div class="CodeMirror-gutters" style="display: none; height: 3046px;"></div>
	</div>
	</div>
	</pre>
	<p><span>主函数部分大致都一样，区间分块的题只需要修改添加和查询函数，进行不同的预处理方法即可。预处理要方便求出后续的答案，比如求和需要求区间的和，查找数量需要提前排序。</span></p>
	<p><span>莫队是一种离线算法，不能用于强制在线的题目。莫队用于解决多区间的查询修改问题。莫队的思想是用暴力的方法求出第一个区间答案，然后将这个区间转移到其他区间，解决出其他区间的答案，转移到其他区间通过添加元素和删除元素完成，这个过程复杂度需要是O(1)，否则复杂度会爆炸，为了让转移的过程更加方便，我们将所需要读入的区间存入结构体，按照某种规则进行排序（分块法），让区间相似的区间集中在一起改变，从而能降低复杂度。复杂度为O(nsqrt(n))。莫队的代码模式都相同，只是不同的题需要找到不同的add函数和del函数，找到这个后问题就迎刃而解。（但是想找到合适的转移的函数真的好难QWQ，数学蠢才的叹息）。</span>
	</p>
	<p><span>莫队的板子</span></p>
	<pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""
		style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.2px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre>
	</div>
	<div class="CodeMirror-measure"></div>
	<div style="position: relative; z-index: 1;"></div>
	<div class="CodeMirror-code" role="presentation" style="">
		<div class="CodeMirror-activeline" style="position: relative;">
			<div class="CodeMirror-activeline-background CodeMirror-linebackground"></div>
			<div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div>
			<pre class=" CodeMirror-line "
				role="presentation"><span role="presentation" style="padding-right: 0.1px;">#include&lt;cstdio&gt;</span></pre>
		</div>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">#include&lt;iostream&gt;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">#include&lt;math.h&gt;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">#include&lt;algorithm&gt;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">#include&lt;cstring&gt;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">#include&lt;unordered_map&gt;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">#include&lt;string&gt;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">#include&lt;queue&gt;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">#include&lt;map&gt;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">#include&lt;ctime&gt;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">#include&lt;limits.h&gt;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">#include &lt;stack&gt;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">#include&lt;set&gt;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">#include&lt;iomanip&gt;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">#define ll long long</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">#define int long long</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">#define um unordered_map</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">#pragma warning(disable : 4996)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">using namespace std;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">#define rep(l,a,b) for(ll l=a;l&lt;=b;l++)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">#define repp(l,a,b) for(ll l=a;l&gt;=b;l--)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">#define mem(x) memset(x,0,sizeof(x))</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">#define fr fast_IO::read()</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">#define INF 0x3f3f3f3f</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">namespace fast_IO {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>ll read() {</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>ll num = 0;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>char c;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>bool tag = false;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>while ((c = getchar()) != '-' &amp;&amp; c != '+' &amp;&amp; (c &lt; '0' || c &gt; '9') &amp;&amp; ~c);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>if (!~c)return EOF;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>if (c == '-')tag = true;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>else if (c == '+')tag = false;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>else num = c ^ 48;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>while ((c = getchar()) &gt;= '0' &amp;&amp; c &lt;= '9')</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>num = (num &lt;&lt; 1) + (num &lt;&lt; 3) + (c ^ 48);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>if (tag)return -num;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>return num;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">const ll mod = 50001;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">#define N 1000000</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">int n, m, k, block, belong[N], a[N], ans[N], cnt[N];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">struct Q</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>int l, r, id;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>bool operator&lt;(const Q&amp; b)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>if (belong[l] != belong[b.l]) return l &lt; b.l;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>else return r &lt; b.r;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}query[N];</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">int L, R, ret;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">void add(int x)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>if (cnt[x] == 0)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>cnt[x] = 1;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>else</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>ret++;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>cnt[x]++;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">void del(int x)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>if (cnt[x] &gt; 1)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>cnt[x]--;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>ret--;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>else</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>cnt[x] = 0;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">signed main()</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>//freopen("in.txt", "r", stdin);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>n = fr, m = fr;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>L = 1, R = 0;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>rep(i, 1, n)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>a[i] = fr;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>rep(i, 1, m)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>int l = fr, r = fr;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>query[i] = { l,r,i };</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>block = sqrt(n);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>rep(i, 1, n) belong[i] = (i - 1) / block + 1;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>sort(query + 1, query + m + 1);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>rep(i, 1, m)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>int l = query[i].l, r = query[i].r, id = query[i].id;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>while (R &lt; r) add(a[++R]);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>while (L &gt; l)  add(a[--L]);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>while (R &gt; r) del(a[R--]);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>while (L &lt; l) del(a[L++]);</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>ans[id] = ret;</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>rep(i, 1, m)</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>{</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>if (ans[i] &gt; 0) cout &lt;&lt; "No" &lt;&lt; "\n";</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>else cout &lt;&lt; "Yes" &lt;&lt; "\n";</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre>
		<pre class=" CodeMirror-line "
			role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre>
	</div>
	</div>
	</div>
	</div>
	</div>
	<div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 2531px;"></div>
	<div class="CodeMirror-gutters" style="display: none; height: 2531px;"></div>
	</div>
	</div>
	</pre>
	<p><span>遇到前缀和相关的问题时可能需要统计[l-1,r]的值。异或的逆运算就是他本身，a^b=k,则有b=a^k。</span></p>
	</div>
	</div>
</body>

</html>